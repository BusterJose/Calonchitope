<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="/pages/plantilla.xhtml">
	<ui:define name="title"> Gestion de Servidores </ui:define>
	<ui:define name="contenido">
		<f:view>
	      <h:form id="formGestionServidores" prependId="false" style="font-size:10px;">
	        <div align="center" style="padding-left:200px; padding-right:200px;">
				<p:growl id="notificacionCalificacion" showDetail="true" life="3000"></p:growl>
			</div>
	        <p:panel id="panelServidores" header="Consulta de Servidores">						
				<h:panelGrid columns="10">
						<h:outputText value="Tipo de Busqueda :"/>
						<h:selectOneMenu id="elegirBusqu" value="#{consultaServidorController.tipSearch}" >
							<f:selectItem itemLabel="Elija una opcion" itemValue="0"/>
							<f:selectItem itemLabel="DNI" itemValue="1"/>
							<f:selectItem itemLabel="Apellidos y Nombres" itemValue="2"/>
							<f:ajax event="change" render="panelServidores"/>
						</h:selectOneMenu>														
						<p:inputText id="apPat" rendered="#{consultaServidorController.tipSearch==2}" value="#{consultaServidorController.cargoServidor.paterno}"/>
						<p:inputText id="apMat" rendered="#{consultaServidorController.tipSearch==2}" value="#{consultaServidorController.cargoServidor.materno}"/>
						<p:inputText id="nomb" rendered="#{consultaServidorController.tipSearch==2}" value="#{consultaServidorController.cargoServidor.nombre}"/>
						<p:inputText id="dni" rendered="#{consultaServidorController.tipSearch==1}" value="#{consultaServidorController.cargoServidor.docIdent}"/>
						<p:commandButton id="buscr" value="Buscar" title="Buscar Trabajador" style="width:140px" actionListener="#{consultaServidorController.buscarTrabajador}" update="layout"/>
					</h:panelGrid> 	
			</p:panel>	
			<p:layout id="layout" style="min-width:800px;min-height:505px;">
				<p:layoutUnit position="left" id="tabLayResult" style="overflow:auto" width="600" resizable="true">
					<p:dataTable id="tablSearch" widgetVar="tablSearch" paginator="true" update="tablHisCar"
						value="#{consultaServidorController.listaServidores}" var="servidor" style="width:100%;" selectionMode="single"
						dblClickSelect="true" rowSelectListener="#{consultaServidorController.mostrarServidor}" 
						selection="#{consultaServidorController.capturServidor}" emptyMessage="No hay registro del Servidor" >
						<f:facet name="header">
							<h:outputText value="Historial de Plaza"/>
						</f:facet>
						<p:column headerText="Apellidos y Nombres">
							<h:outputText value="#{servidor.paterno} #{servidor.materno} #{servidor.nombre}"/>
						</p:column>
						<p:column headerText="Cargo">
							<h:outputText value="#{servidor.plaza}"/>
						</p:column>			
						<p:column headerText="Nivel">
							<h:outputText value="#{servidor.nivelCarg}"/>
						</p:column>				
						<p:column headerText="Dependencia">
							<h:outputText value="#{servidor.nombDependencia}"/>
						</p:column>					
					</p:dataTable>
				</p:layoutUnit>
				<p:layoutUnit position="center">
					<p:dataTable id="tablHisCar" widgetVar="tablHisCar" paginator="true" onRowEditUpdate="tablHisCar" 
						value="#{consultaServidorController.listaHistServidor}" var="servidor" style="width:100%" 
						update="" dblClickSelect="true" emptyMessage="No hay registro del Servidor">
						<f:facet name="header">
							<h:outputText value="Lista de Servidores"/>
						</f:facet>
						<p:column headerText="Nro. Documento">
							<h:outputText value="#{servidor.docIdent}"/>
						</p:column>
						<p:column headerText="Condicion">
							<h:outputText value="#{servidor.condicionCarg}"/>
						</p:column>					
						<p:column headerText="Nivel">
							<h:outputText value="#{servidor.nivelCarg}"/>
						</p:column>					
					</p:dataTable>
				</p:layoutUnit>
			</p:layout>											
		  </h:form>
		</f:view>
	</ui:define>
</ui:composition>