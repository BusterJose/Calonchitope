<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"	
	  xmlns:p="http://primefaces.prime.com.tr/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Convocatorias</title>
</h:head>
<h:body style="background-image:url(#{loginController.rutaRaiz}/pages/images/fondo_login2.png)">
	<h:form style="font-size:10px;" >
	<p:dialog id="idBase" widgetVar="dlgBase" header="Base de la Convocatoria" 
	visible="#{publicacionController.mostrardlgBase}" showEffect="blind" modal="true">
		<p:outputPanel id="idpanelBase">
			<p:fieldset styleClass="ui-state-hover">
			<table>
				<tr><td><h:outputText value="Entidad Convocante:"/></td>
					<td><h:outputText value="Universidad Nacional Mayor de San Marcos."/></td>
				</tr>
				<tr><td><h:outputText value="Domicilio de la Entidad:"/></td>
					<td><h:outputText value="Av. Venezuela s/n, Ciudad Universitaria, Lima 1. "/></td>
				</tr>
				<tr><td><h:outputText value="Depedencia Usuaria:"/></td>
					<td><h:outputText value="#{publicacionController.convocatoriaSelected.descDep}"/></td>
				</tr>
				<tr><td><h:outputText value="Objetivo de la Convocatoria:"/></td>
					<td><h:outputText value="#{publicacionController.convocatoriaSelected.objetivoConv}"/></td>
				</tr>
			</table>
			</p:fieldset>
			<p:fieldset styleClass="ui-state-hover" legend="Plazas">
			<p:dataList value="#{publicacionController.convocatoriaSelected.plazas}" var="plazas">
				<ui:include src="/WEB-INF/componentes/detallePlazasComponente.xhtml"></ui:include>
			</p:dataList>
			
			</p:fieldset>
		</p:outputPanel>
	</p:dialog>
	<table style="width:100%; height:100%" border="0">
	<tr><td ><h:graphicImage url="#{loginController.rutaRaiz}/pages/images/cabecera_sgfqrrhh.png" /></td>
	<td align="right">
			<p:commandLink value="Ingresar" style="color:white; font-family:Arial, Helvetica; font-size:14px" 
			action="#{publicacionController.iraLogin}" ajax="false"/>&nbsp;
			<h:outputText value="|" style="color:white; font-family:Arial, Helvetica; font-size:14px"/>&nbsp;
			<p:commandLink value="Convocatorias" style="color:white; font-family:Arial, 
			Helvetica; font-size:14px" 
			action="#{publicacionController.iraPublicaciones}" ajax="false"/>
	</td></tr>
	<tr style="height:100px"><td></td><td></td></tr>
	<tr>
	<td colspan="2" align="center"> 
	<h:outputText value="#{enviarCVController.msjCV}" style="font-size:18px; color:white"/>
	<table style="width:600px; height:400px;background-image:url(#{loginController.rutaRaiz}/pages/images/tabTranspPub.png)">
		<tr><td height="60px"></td></tr>
		<tr><td align="center">
			<p:dataTable value="#{publicacionController.listconv}" var="conv"
			style="font-family: Arial, Helvetica; color: White; font-size:12px;background: none;">
		        <p:column>  
		            <f:facet name="header">  
		                    Convocatoria  
		            </f:facet>  
		            <h:commandLink actionListener="#{publicacionController.mostrarBase}">  
		            <p:ajax update="idpanelBase" event="onclick"/>
		            <h:outputText value="#{conv.objetivoConv}"/>
		            <f:param id="paramidConv" value="#{conv.idConvocatoria}" /> 
		            </h:commandLink>
		        </p:column>  
		  
		        <p:column>  
		            <f:facet name="header">  
		                    Estado
		            </f:facet>  
		            <h:outputText value="#{conv.descEstadoConv}" rendered="#{!conv.mostrarlinkPostular}" />
		            <h:commandLink rendered="#{conv.mostrarlinkPostular}" action="#{enviarCVController.iraEnviarCV}"
		            actionListener="#{enviarCVController.obtenerPlazas}">
		            <f:param id="paramidConv2" value="#{conv.idConvocatoria}" />
		            <h:outputText value="#{conv.descEstadoConv}"/>
		            </h:commandLink>  
		        </p:column>  
		  
		        <p:column>  
		            <f:facet name="header">  
		                    Resultados
		            </f:facet>
		            <h:outputText value="RESULTADOS" rendered="#{!conv.mostrarlinkResultados}"></h:outputText>		        
		            <h:commandLink  rendered="#{conv.mostrarlinkResultados}" actionListener="#{publicacionController.mostrarResultados}"
		            action="#{publicacionController.irVerResultadosConvocatoria}">
		            <h:outputText value="#{conv.descEstadoConv}" />
		            <f:param id="paramIdConvResult" value="#{conv.idConvocatoria}"/>
		            <f:param id="paramIdEstadoConv" value="#{conv.idEstadoConv}"/>
		            </h:commandLink>		              
		        </p:column>		
			</p:dataTable>
		</td></tr>
	</table>
	</td>
	</tr>
	</table>
	</h:form>
</h:body>
</html>
