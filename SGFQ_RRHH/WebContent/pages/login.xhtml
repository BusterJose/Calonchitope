<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:p="http://primefaces.prime.com.tr/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>sgfqRRHH login</title>
</h:head>
<body background="#{loginController.rutaRaiz}/pages/images/fondo_login2.png" 
style="background-repeat:no-repeat; background-position:absolute" >
<table style="width:100%; height:100%;background-repeat:no-repeat;" border="0">
<tr ><td><h:graphicImage url="#{loginController.rutaRaiz}/pages/images/cabecera_sgfqrrhh.png" /></td>
<td align="right" >
<h:form style="font-size:10px;">
		<p:commandLink value="Ingresar" style="color:white; font-family:Arial, Helvetica; font-size:14px" 
		action="#{publicacionController.iraLogin}" ajax="false"/>&nbsp;
		<h:outputText value="|" style="color:white; font-family:Arial, Helvetica; font-size:14px"/>&nbsp;
		<p:commandLink value="Convocatorias" style="color:white; font-family:Arial, 
		Helvetica; font-size:14px" 
		action="#{publicacionController.iraPublicaciones}" ajax="false"/>
</h:form>
</td></tr>
<tr style="height:100px"><td></td><td></td></tr>
<tr >
<td colspan="2" align="center"> 
<table style="width:600px; height:400px; background-image:url(#{loginController.rutaRaiz}/pages/images/tabTransp.png)">
		<tr><td height="60px" align="right">
		</td></tr>
		<tr><td align="center">
<h:form style="font-size:12px;" id="formLoginRRHH">
		
		<table>
			<tr>
				<td colspan="3" align="center">
					<p:messages id="growl" autoUpdate="true"/>
				</td>
			</tr>
			<tr><td><h:outputText value="Usuario: "  /></td>
				<td><p:inputText id="idusu" value="#{loginController.usu}" required="true" 
					requiredMessage="Debe ingresar un usuario"/></td>
				<td><h:message for="idusu" style="color:red"/></td></tr>
			<tr><td><h:outputText value="Contraseña: " /></td>
				<td><p:password id="idpsw" value="#{loginController.psw}" required="true"
					requiredMessage="Debe ingresar la contrasena" feedback="false"/></td>
				<td><h:message for="idpsw" style="color:red"/> </td></tr>
			<tr>
				<td colspan="3" align="center">
				<p:commandButton value="Iniciar Sesion" ajax="#{loginController.ayax}" action="#{loginController.validarCaducidad}" 
					oncomplete="diasBlokeoAbrir(xhr,status,args)" update="growl,diasBlokeo"/>
				</td>
			</tr>
		</table>

		<p:dialog  header="Dias para bloqueo de usuario" widgetVar="diasBlokeo" modal="true">
			<h:outputText id="diasBlokeo" value="Faltan #{loginController.diasDeBlokeo} dias para que caduque su contraseña"/>
			<br/>
			<div align="center">
			<p:commandButton value="Acceder" action="#{loginController.login}" ajax="false" 
						oncomplete="diasBlokeo.hide()"/>							
			</div>	
			<div align="center">
				<h:outputLink value="http://quipucamayoc.unmsm.edu.pe/SoporteUsuarios/pages/login.jsf" target="_blank">
					<h:outputText value="Cambiar Contraseña" style="font-size:10px;"/>
				</h:outputLink>
			</div>	
		</p:dialog>	
		<script type="text/javascript">
			function diasBlokeoAbrir(xhr,status,args) {
				var resultado=args.resultado;	
				if (resultado){
					diasBlokeo.show();
				}									
			}
		</script>	
</h:form>
		</td></tr></table>
		</td>
		</tr>
</table>
</body>
</html>